<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dongle Bot - Assistant Intelligent</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --primary-green: #25d366;
            --dark-green: #128c7e;
            --light-green: #dcf8c6;
            --bg-color: #e5ddd5;
            --white: #ffffff;
            --gray-light: #f8f8f8;
            --gray-medium: #e0e0e0;
            --gray-dark: #999;
            --text-dark: #333;
            --shadow-sm: 0 2px 5px rgba(0, 0, 0, 0.08);
            --shadow-md: 0 4px 15px rgba(0, 0, 0, 0.12);
            --shadow-lg: 0 8px 32px rgba(0, 0, 0, 0.15);
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen', 'Ubuntu', 'Cantarell', sans-serif;
            background: linear-gradient(135deg, #e5ddd5 0%, #d4ccc4 100%);
            min-height: 100vh;
            padding: 10px;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }

        .chat-container {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            border-radius: 20px;
            background-color: var(--white);
            box-shadow: var(--shadow-lg);
            overflow: hidden;
            animation: slideIn 0.4s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            display: flex;
            flex-direction: column;
            height: 90vh;
            max-height: 700px;
        }

        @keyframes slideIn {
            from {
                opacity: 0;
                transform: translateY(30px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .chat-header {
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--dark-green) 100%);
            color: var(--white);
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }

        .chat-header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.1) 50%, transparent 70%);
            animation: shine 3s infinite;
        }

        @keyframes shine {
            0%, 100% { transform: translateX(-100%); }
            50% { transform: translateX(100%); }
        }

        .bot-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            border: 3px solid var(--white);
            box-shadow: 0 4px 10px rgba(0,0,0,0.2);
            object-fit: cover;
        }

        .header-info {
            flex: 1;
            z-index: 1;
        }

        .header-info h1 {
            font-size: clamp(18px, 4vw, 24px);
            font-weight: 600;
            margin-bottom: 3px;
        }

        .header-status {
            font-size: 12px;
            opacity: 0.9;
            display: flex;
            align-items: center;
            gap: 5px;
        }

        .status-indicator {
            width: 8px;
            height: 8px;
            background-color: #4ade80;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0%, 100% { opacity: 1; transform: scale(1); }
            50% { opacity: 0.7; transform: scale(1.2); }
        }

        .messages {
            flex: 1;
            overflow-y: auto;
            padding: 20px;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background: linear-gradient(to bottom, var(--gray-light) 0%, var(--white) 100%);
            background-image: 
                repeating-linear-gradient(45deg, transparent, transparent 35px, rgba(0,0,0,.02) 35px, rgba(0,0,0,.02) 70px);
        }

        .messages::-webkit-scrollbar {
            width: 6px;
        }

        .messages::-webkit-scrollbar-track {
            background: transparent;
        }

        .messages::-webkit-scrollbar-thumb {
            background: var(--primary-green);
            border-radius: 10px;
        }

        .message {
            padding: 12px 16px;
            border-radius: 15px;
            max-width: 85%;
            position: relative;
            word-wrap: break-word;
            animation: messageSlide 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
            box-shadow: var(--shadow-sm);
            line-height: 1.5;
        }

        @keyframes messageSlide {
            from {
                opacity: 0;
                transform: translateY(15px) scale(0.95);
            }
            to {
                opacity: 1;
                transform: translateY(0) scale(1);
            }
        }

        .message.user {
            background: linear-gradient(135deg, var(--light-green) 0%, #d0f2ba 100%);
            align-self: flex-end;
            border-bottom-right-radius: 4px;
            margin-left: auto;
        }

        .message.bot {
            background: linear-gradient(135deg, var(--white) 0%, #f5f5f5 100%);
            align-self: flex-start;
            border-bottom-left-radius: 4px;
            border: 1px solid var(--gray-medium);
        }

        .message .text {
            font-size: 15px;
            color: var(--text-dark);
        }

        .message .timestamp {
            font-size: 10px;
            color: var(--gray-dark);
            margin-top: 6px;
            text-align: right;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            gap: 5px;
        }

        .message.user .timestamp {
            color: #075e54;
        }

        .check-marks {
            color: var(--primary-green);
            font-weight: bold;
        }

        .typing-indicator {
            display: none;
            align-self: flex-start;
            padding: 12px 20px;
            background: var(--white);
            border-radius: 15px;
            border-bottom-left-radius: 4px;
            box-shadow: var(--shadow-sm);
            border: 1px solid var(--gray-medium);
        }

        .typing-indicator.active {
            display: block;
        }

        .typing-indicator .dots {
            display: flex;
            gap: 5px;
            align-items: center;
        }

        .typing-indicator .dots span {
            width: 8px;
            height: 8px;
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--dark-green) 100%);
            border-radius: 50%;
            animation: bounce 1.4s infinite ease-in-out;
        }

        .typing-indicator .dots span:nth-child(1) {
            animation-delay: 0s;
        }

        .typing-indicator .dots span:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-indicator .dots span:nth-child(3) {
            animation-delay: 0.4s;
        }

        @keyframes bounce {
            0%, 60%, 100% {
                transform: translateY(0);
            }
            30% {
                transform: translateY(-12px);
            }
        }

        .quick-replies {
            display: none;
            flex-wrap: wrap;
            gap: 8px;
            padding: 10px 20px;
            background: var(--gray-light);
            border-top: 1px solid var(--gray-medium);
        }

        .quick-replies.active {
            display: flex;
        }

        .quick-reply-btn {
            padding: 8px 16px;
            background: var(--white);
            border: 2px solid var(--primary-green);
            border-radius: 20px;
            color: var(--primary-green);
            font-size: 13px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-sm);
        }

        .quick-reply-btn:hover {
            background: var(--primary-green);
            color: var(--white);
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .input-container {
            display: flex;
            padding: 15px;
            border-top: 1px solid var(--gray-medium);
            background-color: var(--gray-light);
            gap: 10px;
            align-items: center;
        }

        .input-container input {
            flex: 1;
            border: 2px solid var(--gray-medium);
            padding: 14px 18px;
            border-radius: 25px;
            font-size: 15px;
            transition: all 0.3s ease;
            background: var(--white);
        }

        .input-container input:focus {
            outline: none;
            border-color: var(--primary-green);
            box-shadow: 0 0 0 4px rgba(37, 211, 102, 0.1);
        }

        .input-container input::placeholder {
            color: var(--gray-dark);
        }

        .input-container button {
            border: none;
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--dark-green) 100%);
            color: var(--white);
            padding: 14px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-weight: 600;
            font-size: 15px;
            transition: all 0.3s ease;
            box-shadow: var(--shadow-md);
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .input-container button:hover:not(:disabled) {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 211, 102, 0.4);
        }

        .input-container button:active:not(:disabled) {
            transform: translateY(0);
        }

        .input-container button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        .menu {
            text-align: center;
            margin-top: 20px;
            width: 100%;
            max-width: 600px;
        }

        .menu a {
            text-decoration: none;
            color: var(--white);
            background: linear-gradient(135deg, var(--primary-green) 0%, var(--dark-green) 100%);
            padding: 14px 32px;
            border-radius: 30px;
            display: inline-flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            font-weight: 600;
            font-size: 15px;
            box-shadow: var(--shadow-md);
        }

        .menu a:hover {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(37, 211, 102, 0.4);
        }

        .cursor {
            display: inline-block;
            width: 2px;
            height: 1em;
            background-color: var(--primary-green);
            animation: blink 0.8s infinite;
            margin-left: 2px;
            vertical-align: text-bottom;
        }

        @keyframes blink {
            0%, 49% { opacity: 1; }
            50%, 100% { opacity: 0; }
        }

        .emoji {
            font-size: 1.2em;
            display: inline-block;
            margin: 0 2px;
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            body {
                padding: 5px;
            }

            .chat-container {
                height: 95vh;
                max-height: none;
                border-radius: 15px;
            }

            .messages {
                padding: 15px 10px;
                gap: 12px;
            }

            .message {
                max-width: 90%;
                padding: 10px 14px;
            }

            .chat-header {
                padding: 15px;
            }

            .bot-avatar {
                width: 45px;
                height: 45px;
            }

            .input-container {
                padding: 12px 10px;
                gap: 8px;
            }

            .input-container input {
                padding: 12px 16px;
                font-size: 14px;
            }

            .input-container button {
                padding: 12px 20px;
                font-size: 14px;
            }

            .quick-reply-btn {
                font-size: 12px;
                padding: 7px 14px;
            }
        }

        @media (max-width: 480px) {
            .chat-header h1 {
                font-size: 18px;
            }

            .message {
                font-size: 14px;
            }

            .input-container button {
                padding: 12px 16px;
            }

            .menu a {
                padding: 12px 24px;
                font-size: 14px;
            }
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            <img src="https://i.ibb.co/KyCFHKV/IMG-20241029-222529.jpg" alt="Dongle Bot" class="bot-avatar">
            <div class="header-info">
                <h1>🤖 Dongle Bot</h1>
                <div class="header-status">
                    <span class="status-indicator"></span>
                    <span>En ligne - Assistant IA</span>
                </div>
            </div>
        </div>
        
        <div class="messages" id="messages"></div>
        
        <div class="typing-indicator" id="typingIndicator">
            <div class="dots">
                <span></span>
                <span></span>
                <span></span>
            </div>
        </div>

        <div class="quick-replies" id="quickReplies"></div>
        
        <div class="input-container">
            <input type="text" id="userInput" placeholder="Tapez votre message..." autocomplete="off" />
            <button onclick="sendMessage()" id="sendBtn">
                <span>Envoyer</span>
                <span>📤</span>
            </button>
        </div>
    </div>
    
    <div class="menu">
        <a href="index.html">
            <span>🏠</span>
            <span>Retour à l'accueil</span>
        </a>
    </div>

    <script>
        const messagesDiv = document.getElementById('messages');
        const typingIndicator = document.getElementById('typingIndicator');
        const quickRepliesDiv = document.getElementById('quickReplies');
        const userInput = document.getElementById('userInput');
        const sendBtn = document.getElementById('sendBtn');
        
        let currentStep = 0;
        let isTyping = false;
        const userResponses = {};
        
        const conversationFlow = {
            0: {
                question: "Bonjour ! 👋 Je suis <strong>Dongle Bot</strong>, votre assistant virtuel pour les formations en informatique. 🎓\n\nJe suis là pour vous guider et vous aider à trouver la formation parfaite pour vous ! 🚀\n\n<strong>Pour commencer, quel est votre prénom ?</strong> 😊",
                nextStep: 1,
                quickReplies: null,
                validate: (response) => {
                    const trimmed = response.trim();
                    return trimmed.length >= 2 && /^[a-zA-ZÀ-ÿ\s'-]+$/.test(trimmed);
                },
                errorMessage: "Désolé, j'ai besoin d'un prénom valide (au moins 2 lettres, sans chiffres) 😅"
            },
            1: {
                question: (name) => `Enchanté ${name} ! 😊 C'est un plaisir de faire votre connaissance ! 🤝\n\n<strong>Dites-moi, avez-vous déjà de l'expérience en programmation ou en informatique ?</strong> 💻`,
                nextStep: 2,
                quickReplies: ["✅ Oui, j'ai de l'expérience", "❌ Non, je débute", "🤔 Un petit peu"],
                validate: (response) => {
                    const r = response.toLowerCase();
                    return r.length >= 2;
                },
                errorMessage: "Pourriez-vous préciser votre niveau d'expérience ? 🤔"
            },
            2: {
                question: (hasExperience) => {
                    const prefix = hasExperience === 'oui' 
                        ? "Parfait ! 🎯 Votre expérience sera un atout précieux !" 
                        : hasExperience === 'peu'
                        ? "Super ! 🌱 C'est déjà un bon début !"
                        : "Excellent ! 🌟 Tout le monde commence quelque part !";
                    
                    return `${prefix}\n\n<strong>Maintenant, quelle formation vous intéresse le plus ?</strong> 🎯\n\nVoici nos spécialités :\n\n🐍 <strong>Python</strong> - Idéal pour débuter\n🎨 <strong>HTML/CSS</strong> - Créez des sites web\n⚡ <strong>C/C++</strong> - Pour les performances\n🗄️ <strong>PHP/MySQL</strong> - Développement web complet\n🔐 <strong>Cybersécurité</strong> - Protégez les systèmes\n📱 <strong>Développement mobile</strong> - Apps iOS/Android\n🤖 <strong>Intelligence Artificielle</strong> - IA & Machine Learning\n\n<em>Tapez le nom de la formation qui vous intéresse !</em> ✨`;
                },
                nextStep: 3,
                quickReplies: ["🐍 Python", "🎨 HTML/CSS", "⚡ C/C++", "🗄️ PHP/MySQL", "🔐 Cybersécurité", "📱 Mobile", "🤖 IA"],
                validate: (response) => response.length >= 2,
                errorMessage: "Choisissez une formation parmi celles proposées 🎓"
            },
            3: {
                question: (choice) => {
                    const formations = {
                        'python': {emoji: '🐍', name: 'Python', desc: 'langage polyvalent et puissant'},
                        'html': {emoji: '🎨', name: 'HTML/CSS', desc: 'fondation du web design'},
                        'css': {emoji: '🎨', name: 'HTML/CSS', desc: 'fondation du web design'},
                        'c': {emoji: '⚡', name: 'C/C++', desc: 'performance maximale'},
                        'c++': {emoji: '⚡', name: 'C/C++', desc: 'performance maximale'},
                        'php': {emoji: '🗄️', name: 'PHP/MySQL', desc: 'développement web dynamique'},
                        'mysql': {emoji: '🗄️', name: 'PHP/MySQL', desc: 'développement web dynamique'},
                        'cyber': {emoji: '🔐', name: 'Cybersécurité', desc: 'protection des systèmes'},
                        'sécurité': {emoji: '🔐', name: 'Cybersécurité', desc: 'protection des systèmes'},
                        'mobile': {emoji: '📱', name: 'Développement Mobile', desc: 'apps iOS et Android'},
                        'ia': {emoji: '🤖', name: 'Intelligence Artificielle', desc: 'IA et Machine Learning'},
                        'ai': {emoji: '🤖', name: 'Intelligence Artificielle', desc: 'IA et Machine Learning'}
                    };
                    
                    let matchedFormation = null;
                    const lowerChoice = choice.toLowerCase();
                    
                    for (let key in formations) {
                        if (lowerChoice.includes(key)) {
                            matchedFormation = formations[key];
                            break;
                        }
                    }
                    
                    if (!matchedFormation) {
                        matchedFormation = {emoji: '📚', name: choice, desc: 'formation spécialisée'};
                    }
                    
                    return `Excellent choix ! ${matchedFormation.emoji} <strong>${matchedFormation.name}</strong> est une ${matchedFormation.desc} ! 🎉\n\n<strong>Ce que nos formations incluent :</strong>\n\n✅ <strong>Cours théoriques</strong> approfondis\n✅ <strong>Exercices pratiques</strong> concrets\n✅ <strong>Projets réels</strong> portfolio\n✅ <strong>Support 24/7</strong> personnalisé\n✅ <strong>Certificat officiel</strong> reconnu\n✅ <strong>Groupe d'entraide</strong> actif\n✅ <strong>Mises à jour</strong> gratuites à vie\n\n💰 <strong>Tarifs flexibles</strong> et paiements échelonnés disponibles !\n\n<strong>Je vais maintenant vous rediriger vers WhatsApp</strong> 📱 pour finaliser votre inscription et répondre à toutes vos questions en direct ! 🚀`;
                },
                nextStep: 4,
                quickReplies: ["✅ Parfait, allons-y !", "📞 Contactez-moi"],
                validate: () => true
            },
            4: {
                question: () => `Super ! 🎊 Je prépare votre message personnalisé...\n\n<strong>Dans quelques secondes, vous serez redirigé vers WhatsApp</strong> où notre équipe vous accueillera chaleureusement ! 🤗\n\n<em>À tout de suite !</em> 👋✨`,
                nextStep: 'end',
                validate: () => true
            }
        };

        function sendMessage() {
            const message = userInput.value.trim();

            if (message && !isTyping) {
                addMessage(message, 'user');
                userInput.value = '';
                hideQuickReplies();
                processUserResponse(message);
            }
        }

        userInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !isTyping) {
                sendMessage();
            }
        });

        function addMessage(text, sender, animate = true) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${sender}`;
            
            const textDiv = document.createElement('div');
            textDiv.className = 'text';
            
            if (sender === 'bot') {
                textDiv.innerHTML = text;
            } else {
                textDiv.textContent = text;
            }
            
            messageDiv.appendChild(textDiv);
            
            const timestamp = document.createElement('div');
            timestamp.className = 'timestamp';
            const time = new Date().toLocaleTimeString('fr-FR', { hour: '2-digit', minute: '2-digit' });
            
            if (sender === 'user') {
                timestamp.innerHTML = `${time} <span class="check-marks">✓✓</span>`;
            } else {
                timestamp.textContent = time;
            }
            
            textDiv.appendChild(timestamp);
            messagesDiv.appendChild(messageDiv);
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function showTypingIndicator() {
            typingIndicator.classList.add('active');
            messagesDiv.scrollTop = messagesDiv.scrollHeight;
        }

        function hideTypingIndicator() {
            typingIndicator.classList.remove('active');
        }

        function showQuickReplies(replies) {
            if (!replies) return;
            
            quickRepliesDiv.innerHTML = '';
            replies.forEach(reply => {
                const btn = document.createElement('button');
                btn.className = 'quick-reply-btn';
                btn.textContent = reply;
                btn.onclick = () => {
                    userInput.value = reply;
                    sendMessage();
                };
                quickRepliesDiv.appendChild(btn);
            });
            quickRepliesDiv.classList.add('active');
        }

        function hideQuickReplies() {
            quickRepliesDiv.classList.remove('active');
        }

        function disableInput() {
            userInput.disabled = true;
            sendBtn.disabled = true;
        }

        function enableInput() {
            userInput.disabled = false;
            sendBtn.disabled = false;
            userInput.focus();
        }

        function processUserResponse(response) {
            const step = conversationFlow[currentStep];
            
            if (!step.validate(response)) {
                showTypingIndicator();
                setTimeout(() => {
                    hideTypingIndicator();
                    addMessage(step.errorMessage || "Désolé, je n'ai pas bien compris. 🤔 Pouvez-vous reformuler ?", 'bot');
                    if (step.quickReplies) {
                        showQuickReplies(step.quickReplies);
                    }
                }, 1200);
                return;
            }
            
            // Sauvegarder et traiter les réponses
            switch(currentStep) {
                case 0:
                    userResponses.name = response.trim();
                    break;
                case 1:
                    const r = response.toLowerCase();
                    if (r.includes('oui') || r.includes('expérience') || r.includes('✅')) {
                        userResponses.hasExperience = 'oui';
                    } else if (r.includes('peu') || r.includes('petit') || r.includes('🤔')) {
                        userResponses.hasExperience = 'peu';
                    } else {
                        userResponses.hasExperience = 'non';
                    }
                    break;
                case 2:
                    userResponses.choice = response;
                    break;
            }
            
            currentStep = step.nextStep;
            
            if (currentStep === 'end') {
                showTypingIndicator();
                setTimeout(() => {
                    hideTypingIndicator();
                    
                    setTimeout(() => {
                        openWhatsApp();
                    }, 2500);
                }, 1500);
            } else {
                showTypingIndicator();
                const delay = Math.random() * 800 + 1200;
                
                setTimeout(() => {
                    hideTypingIndicator();
                    let nextQuestion;
                    
                    if (typeof conversationFlow[currentStep].question === 'function') {
                        if (currentStep === 1) {
                            nextQuestion = conversationFlow[currentStep].question(userResponses.name);
                        } else if (currentStep === 2) {
                            nextQuestion = conversationFlow[currentStep].question(userResponses.hasExperience);
                        } else if (currentStep === 3) {
                            nextQuestion = conversationFlow[currentStep].question(userResponses.choice);
                        } else if (currentStep === 4) {
                            nextQuestion = conversationFlow[currentStep].question();
                        }
                    } else {
                        nextQuestion = conversationFlow[currentStep].question;
                    }
                    
                    addMessage(nextQuestion, 'bot');
                    
                    if (conversationFlow[currentStep].quickReplies) {
                        setTimeout(() => {
                            showQuickReplies(conversationFlow[currentStep].quickReplies);
                        }, 300);
                    }
                }, delay);
            }
        }

        function openWhatsApp() {
            const experienceText = userResponses.hasExperience === 'oui' 
                ? "✅ J'ai déjà de l'expérience" 
                : userResponses.hasExperience === 'peu'
                ? "🤔 J'ai un peu d'expérience"
                : "🌱 Je suis débutant(e)";
            
            const message = `🤖 *Message via Dongle Bot*\n\n👋 Bonjour ! Je m'appelle *${userResponses.name}*\n\n📊 Niveau : ${experienceText}\n\n🎯 Formation souhaitée : *${userResponses.choice}*\n\n💬 J'aimerais obtenir plus d'informations sur cette formation et les modalités d'inscription.\n\nMerci ! 😊`;
            
            const whatsappUrl = `https://api.whatsapp.com/send?phone=237673818077&text=${encodeURIComponent(message)}`;
            window.open(whatsappUrl, '_blank');
            
            // Message de confirmation
            setTimeout(() => {
                addMessage("🎉 Redirection en cours vers WhatsApp...\n\n<strong>Si la fenêtre ne s'ouvre pas automatiquement</strong>, cliquez sur le bouton ci-dessous 👇", 'bot');
                
                // Ajouter un bouton de secours
                const fallbackBtn = document.createElement('div');
                fallbackBtn.style.cssText = 'text-align: center; margin-top: 15px;';
                fallbackBtn.innerHTML = `<a href="${whatsappUrl}" target="_blank" style="display: inline-block; background: linear-gradient(135deg, #25d366 0%, #128c7e 100%); color: white; padding: 12px 24px; border-radius: 25px; text-decoration: none; font-weight: 600; box-shadow: 0 4px 15px rgba(37, 211, 102, 0.3);">📱 Ouvrir WhatsApp</a>`;
                messagesDiv.appendChild(fallbackBtn);
                messagesDiv.scrollTop = messagesDiv.scrollHeight;
            }, 500);
        }

        // Message d'accueil initial
        window.addEventListener('load', () => {
            setTimeout(() => {
                addMessage(conversationFlow[0].question, 'bot');
                enableInput();
            }, 800);
        });

        // Gestion du focus automatique
        userInput.addEventListener('blur', () => {
            if (!isTyping && !userInput.disabled) {
                setTimeout(() => userInput.focus(), 100);
            }
        });

        // Animation des émojis au chargement
        document.querySelectorAll('.emoji').forEach((emoji, index) => {
            emoji.style.animation = `bounce 0.5s ease ${index * 0.1}s`;
        });

        // Détection des mots-clés pour améliorer les réponses
        function detectKeywords(text) {
            const keywords = {
                salutation: ['bonjour', 'salut', 'hello', 'hey', 'coucou'],
                remerciement: ['merci', 'thanks', 'thank you'],
                aide: ['aide', 'help', 'question', 'info'],
                prix: ['prix', 'coût', 'tarif', 'combien', 'payer'],
                durée: ['durée', 'temps', 'combien de temps', 'long']
            };
            
            const lowerText = text.toLowerCase();
            
            for (let category in keywords) {
                if (keywords[category].some(keyword => lowerText.includes(keyword))) {
                    return category;
                }
            }
            
            return null;
        }

        // Désactiver l'input au démarrage
        disableInput();
    </script>
</body>
</html>
